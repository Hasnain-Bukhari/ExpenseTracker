import{d as O,u as W,r as m,a as G,c as H,o as J,b as w,w as t,e as U,f as a,g as d,h as l,i as c,t as f,j as n,k as B,l as Q,m as X,s as Y,F as Z,n as ee,p as oe,q as b}from"./index-DbIPzh87.js";import{_ as ae}from"./AuthCard.vue_vue_type_script_setup_true_lang-CsnN6An9.js";import{_ as se}from"./PasswordField.vue_vue_type_script_setup_true_lang-CFmK6Yik.js";import{_ as te}from"./SocialLoginButton.vue_vue_type_script_setup_true_lang-WTNeP4ch.js";const le={class:"form-fields"},ne={class:"form-options d-flex justify-space-between align-center mb-6"},ie={class:"divider mb-6"},re={class:"social-login-section"},de={class:"social-buttons d-flex flex-column gap-3"},ce={class:"provider-branding mb-4"},ue={class:"mock-user-info mb-6"},me={class:"text-h6 mb-1"},ve={class:"text-subtitle-2 text-medium-emphasis"},pe={class:"footer-links text-center"},_e={class:"text-body-2 text-medium-emphasis mb-2"},ke=O({__name:"LoginView",setup(fe){const g=oe(),r=W(),E=m(),o=G({email:"",password:"",remember:!1}),v=m(""),x=m(""),p=m(!1),s=m(null),u=m(null),h=()=>{v.value="",o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(v.value="Please enter a valid email address"):v.value="Email is required"},V=()=>{x.value="",o.password||(x.value="Password is required")},L=H(()=>o.email&&o.password&&!v.value&&!x.value&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)),k=async()=>{if(h(),V(),!L.value)return;if((await r.login({email:o.email,password:o.password,remember:o.remember})).success){const e=g.currentRoute.value.query.redirect||"/";g.push(e)}},z=_=>{s.value=_,p.value=!0},P=async()=>{if(!s.value)return;u.value=s.value.id;const _=await r.socialLogin(s.value.id);if(u.value=null,p.value=!1,_.success){const e=g.currentRoute.value.query.redirect||"/";g.push(e)}},R=()=>{p.value=!1,s.value=null,u.value=null};return J(()=>{o.email="admin@example.com",o.password="password123"}),(_,e)=>{const $=l("v-alert"),q=l("v-text-field"),F=l("v-checkbox"),S=l("router-link"),y=l("v-btn"),N=l("v-divider"),K=l("v-form"),M=l("v-icon"),C=l("v-avatar"),T=l("v-card-title"),j=l("v-img"),D=l("v-card-text"),A=l("v-card"),I=l("v-dialog");return b(),w(ae,{title:"Welcome Back",subtitle:"Sign in to your account to continue"},{footer:t(()=>[n("div",pe,[n("p",_e,[e[10]||(e[10]=c(" Don't have an account? ",-1)),a(S,{to:"/auth/register",class:"text-primary text-decoration-none font-weight-medium"},{default:t(()=>[...e[9]||(e[9]=[c(" Sign up ",-1)])]),_:1})])])]),default:t(()=>[d(r).error?(b(),w($,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":e[0]||(e[0]=i=>d(r).clearError())},{default:t(()=>[c(f(d(r).error),1)]),_:1})):U("",!0),a(K,{ref_key:"formRef",ref:E,onSubmit:ee(k,["prevent"]),class:"login-form"},{default:t(()=>[n("div",le,[a(q,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=i=>o.email=i),label:"Email address",type:"email",variant:"outlined","prepend-inner-icon":"mdi-email-outline","error-messages":v.value,disabled:d(r).isLoading,class:"mb-4",autocomplete:"email",onBlur:h,onKeydown:B(k,["enter"])},null,8,["modelValue","error-messages","disabled"]),a(se,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=i=>o.password=i),label:"Password","prepend-inner-icon":"mdi-lock-outline","error-messages":x.value,disabled:d(r).isLoading,class:"mb-4",autocomplete:"current-password",onBlur:V,onKeydown:B(k,["enter"])},null,8,["modelValue","error-messages","disabled"]),n("div",ne,[a(F,{modelValue:o.remember,"onUpdate:modelValue":e[3]||(e[3]=i=>o.remember=i),label:"Remember me","hide-details":"",density:"compact",disabled:d(r).isLoading},null,8,["modelValue","disabled"]),a(S,{to:"/auth/forgot-password",class:"text-primary text-decoration-none text-sm"},{default:t(()=>[...e[5]||(e[5]=[c(" Forgot password? ",-1)])]),_:1})])]),a(y,{type:"submit",color:"primary",size:"large",block:"",variant:"elevated",loading:d(r).isLoading,disabled:!L.value||d(r).isLoading,class:"mb-6 submit-btn"},{default:t(()=>[...e[6]||(e[6]=[c(" Sign In ",-1)])]),_:1},8,["loading","disabled"]),n("div",ie,[a(N),e[7]||(e[7]=n("span",{class:"divider-text text-caption text-medium-emphasis px-3"}," Or continue with ",-1))]),n("div",re,[n("div",de,[(b(!0),Q(Z,null,X(d(Y),i=>(b(),w(te,{key:i.id,provider:i,loading:u.value===i.id,disabled:d(r).isLoading,onClick:z},null,8,["provider","loading","disabled"]))),128))])])]),_:1},512),a(I,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=i=>p.value=i),"max-width":"400",persistent:""},{default:t(()=>[s.value?(b(),w(A,{key:0,class:"social-modal"},{default:t(()=>[a(T,{class:"text-center pa-6"},{default:t(()=>[n("div",ce,[a(C,{color:s.value.color,size:"64"},{default:t(()=>[a(M,{icon:s.value.icon,size:"32",color:"white"},null,8,["icon"])]),_:1},8,["color"])]),n("h3",null,"Continue with "+f(s.value.name),1)]),_:1}),a(D,{class:"text-center pa-6 pt-0"},{default:t(()=>[n("div",ue,[a(C,{size:"80",class:"mb-3"},{default:t(()=>[a(j,{src:s.value.mockUser.avatar},null,8,["src"])]),_:1}),n("h4",me,f(s.value.mockUser.name),1),n("p",ve,f(s.value.mockUser.email),1)]),a(y,{color:"primary",size:"large",block:"",variant:"elevated",loading:u.value===s.value.id,onClick:P,class:"mb-3"},{default:t(()=>[c(" Continue as "+f(s.value.mockUser.name),1)]),_:1},8,["loading"]),a(y,{variant:"text",size:"large",block:"",onClick:R,disabled:u.value===s.value.id},{default:t(()=>[...e[8]||(e[8]=[c(" Cancel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):U("",!0)]),_:1},8,["modelValue"])]),_:1})}}});export{ke as default};
